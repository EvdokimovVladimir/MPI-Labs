# Команды bash

### Очистка терминала
```bash
clear
```

### Выборка вывода, содержащего подстроку
```bash
command | grep 'str'
```

## Удалённое подключение

```bash
ssh studentmpi@greywizard
```

## Передача файлов с/на удалённый хост

```bash
# копирование файла
scp sourcefile username@hostname:targetdir

# копирование каталога
scp -r sourcedir username@hostname:targetdir

# копирование содержимого каталога
scp -r sourcedir/. username@hostname:targetdir
```

## Смена рабочего каталога
```bash
cd          # переход в домашний каталог
cd dir      # переход в каталог dir
cd ..       # переход в родительский каталог
```

## Просмотр содержимого каталога
```bash
# содержимое текущего каталога, включая скрытые файлы, подробно, размер файла в K, M, G
ls -lah

# содержимое каталога dir
ls dir

# рекурсивный вывод подкаталогов
ls -R
```

### Метки прав
`[тип][права пользователя][права группы][права остальных]`  

Типы:  
`-` - обычный файл  
`d` - каталог  
`l` - ссылка

## Изменение прав доступа
```bash
chmod u+rwx file    # добавление всех прав пользователю
chmod 777 file      # полный доступ для всех
chmod -R 777 dir    # полный доступ для всех к каталогу
```

### Права доступа
`[группа][действие][права]`

Группа:  
`a` - все  
`u` - владелец файла  
`g` - группа файла  
`o` - все остальные пользователи

Действие:  
`+` - разрешить  
`-` - запретить  
`=` - назначить

Права:  
`r` - чтение  
`w` - запись  
`x` - выполнение  
`s` - выполнение  от имени суперпользователя

В цифровом виде: `[владелец][группа][остальные]`  
`0` - никаких прав  
`1` - выполнение  
`2` - запись  
`3` - выполнение и запись  
`4` - чтение  
`5` - чтение и выполнение  
`6` - чтение и запись  
`7` - чтение, запись и выполнение

## Создание каталога
```bash
# создание каталога dir
mkdir dir

# создание каталога dir/dir/dir и всех недостающих промежуточных каталогов
mkdir -p dir/dir/dir

# создание каталога с определёнными правами доступа
mkdir -m 700 dir
```

## Удаление файла/каталога
```bash
rm file     # удаление файла file
rm -fr dir  # удаление каталога dir
```

## Вывод содержимого файла
```bash
cat filename
```

## Псевдонимы
```bash
# после этого ls всегда будет вызываться с ключами -lah
alias ls="ls -lah"

# удалить псевдоним
unalias ls
```


# Компиляция
## Fortran

```bash
gfortran source.f90 destination
```

## MPI
```bash
mpif90 source.f90 destination
```


# SLURM
[Мануал от авторов](https://slurm.schedmd.com/man_index.html)

## Информация об очередях

```bash
sinfo -s
```

## Информация об узле/разделе/задаче

```bash
scontrol show node hobbit[01]   # информация о ноде
scontrol show hobbits           # информация об очереди
scontrol show job 123456        # информация о задаче
```

## Просмотр очереди задач

```bash
squeue --user=`whoami`   # свои задачи
squeue --states=RUNNING  # задачи в работе
squeue --long            # подробный вывод
```

## Запуск параллельных задачи

```bash
# 4 потока
# очередь hobbits
# исполняемый файл ./a.out
srun -n 4 -p hobbits ./a.out
```

## Удаление задачи

```bash
# удаление задачи с ID = 123
scancel 123

# удаление всех задач пользователя studentmpi
scancel -u studentmpi
```