# Лабораторная работа №1 "Транспонирование матрицы"

## Необходимо
Транспонировать матрицу, записанную в файле A, разделив её на 4 фрагмента.

### Допущения
- Матрица квадратная
- Число строк и столбцов чётное
- Программа запущена в 4 потока

### Разделение матрицы
Матрицу делим на 4 части.  
Левый верхний фрагмент остаётся на 0 процессе.  
Правый верхний фрагмент отправляем на 1 процесс.  
Левый нижний фрагмент отправляем на 2 процесс.  
Правый нижний фрагмент отправляем на 3 процесс.  

При сборке меняем местами фрагменты 1 и 3 процесса.

### Дано

Файл A:

```
6
6
1.0 2.0 3.0 4.0 5.0 6.0
1.1 2.1 3.1 4.1 5.1 6.1
1.2 2.2 3.2 4.2 5.2 6.2
1.3 2.3 3.3 4.3 5.3 6.3
1.4 2.4 3.4 4.4 5.4 6.4
1.5 2.5 3.5 4.5 5.5 6.5
```
Где:  
6 — число строк  
6 — число столбцов  
далее матрица(число строк x число столбцов)

## Псевдокод
```
если (процесс == 0) {
    прочитать размеры матрицы из файла
    выделить память для матрицы
    прочитать матрицу из файла
    вывести исходную матрицу в терминал

    отправить размеры матрицы на все процессы
    отправить фрагмент матрицы на 1 процесс
    отправить фрагмент матрицы на 2 процесс
    отправить фрагмент матрицы на 3 процесс
} иначе {
    принять размеры матрицы от процесса 0
    выделить память для матрицы
    принять фрагмент матрицы от процесса 0
}

транспонировать свой фрагмент

если (процесс != 0) {
    отправить транспонированный фрагмент матрицы на 0 процесс
} иначе {
    принять фрагмент матрицы с 1 процесса
    принять фрагмент матрицы с 2 процесса
    принять фрагмент матрицы с 3 процесса
    вывести транспонированную матрицу в терминал
}
```

### Псевдокод транспонирования
```
для i от 1 до (число строк)/2
    для j от (i+1) до (число столбцов)/2

        поместить элемент (i, j) во временную переменную
        поместить элемент (j, i) в (i, j) элемент
        поместить значение из временной переменной в (j, i) элемент

    конец цикла
конец цикла
```

## Изучаемые элементы

### Фортран

- типы данных, инициализация переменных
- `allocate` — динамическое выделение памяти
- `open` — открытие файла
- `read` — чтение из файла/терминал
- `write` — запись в файл/терминал
- условия 
```
if() then
end if
```

- циклы
```
do i = 1, n
end do
```

### MPI

- `include "mpif.h"` — подключение библиотеки
- `MPI_INIT` — инициализация
- `MPI_COMM_SIZE` — получение числа процессов
- `MPI_COMM_RANK` — получение номера процесса
- `MPI_FINALIZE` — завершение работы
- `MPI_SEND` — отправка данных
- `MPI_RECV` — получение данных